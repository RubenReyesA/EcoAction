{"remainingRequest":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsRecyclingPoint.vue?vue&type=style&index=0&id=c8a4527c&lang=css","dependencies":[{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsRecyclingPoint.vue","mtime":1623590168433},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1616796459000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4uL3N0eWxlcy9zdHlsZS5jc3MiOwo="},{"version":3,"sources":["/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsRecyclingPoint.vue"],"names":[],"mappings":";AA8YA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsRecyclingPoint.vue","sourceRoot":"","sourcesContent":["<template>\n  <ion-page>\n    <ion-header :translucent=\"true\">\n      <ion-toolbar>\n        <IonButtons>\n          <ion-back-button :text=\"messages[idioma]['backText']\" />\n        </IonButtons>\n        <ion-title>{{messages[idioma][\"detailsRecyclingPTitle\"]}}</ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\" class=\"ion-padding\">\n      <ion-card>\n        <ion-slides pager=\"true\" :options=\"sliderOptions\">\n          <ion-slide v-for=\"i in myPoint['imgs']\" :key=\"i\">\n            <img :src=\"i\" />\n          </ion-slide>\n        </ion-slides>\n        <ion-card-header>\n          <ion-card-title> {{ myPoint[\"nom\"] }}</ion-card-title>\n        </ion-card-header>\n\n        <ion-card-content>\n          <ul>\n            <li\n              v-for=\"t in myPoint['horari'][0].split('.').slice(0, -1)\"\n              :key=\"t\"\n            >\n              {{ t }}\n            </li>\n          </ul>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle> {{messages[idioma][\"addressTitle\"]}} </ion-card-subtitle>\n        </ion-card-header>\n        <ion-card-content>\n          <div class=\"c2\">\n            <ion-label v-for=\"a in addr\" :key=\"a\">{{ a }}</ion-label>\n            <ion-button\n              class=\"infoBTN\"\n              color=\"brown\"\n              @click=\"navigateTo\"\n              icon-end\n              :disabled=\"!isAddr\"\n              >{{messages[idioma][\"openGPSText\"]}}\n              <ion-icon\n                class=\"iconBTN\"\n                :icon=\"navigateCircleOutline\"\n              ></ion-icon>\n            </ion-button>\n          </div>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle> {{messages[idioma][\"phoneTitle\"]}} </ion-card-subtitle>\n        </ion-card-header>\n        <ion-card-content>\n          <div class=\"c2\">\n            <ion-label>{{ telf }}</ion-label>\n            <ion-button\n              class=\"infoBTN\"\n              color=\"green\"\n              @click=\"callTo\"\n              icon-end\n              :disabled=\"!isTelf\"\n              >{{messages[idioma][\"callText\"]}} <ion-icon class=\"iconBTN\" :icon=\"callOutline\"></ion-icon>\n            </ion-button>\n          </div>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle> {{messages[idioma][\"webTitle\"]}} </ion-card-subtitle>\n        </ion-card-header>\n        <ion-card-content>\n          <div class=\"c2\">\n            <ion-label>{{ url }}</ion-label>\n            <ion-button\n              class=\"infoBTN\"\n              @click=\"openURL\"\n              icon-end\n              :disabled=\"!isUrl\"\n              >{{messages[idioma][\"openWebText\"]}}\n              <ion-icon class=\"iconBTN\" :icon=\"globeOutline\"></ion-icon>\n            </ion-button>\n          </div>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-card>\n        <ion-card-content>\n          <div class=\"c2\">\n            <ion-list>\n              <ion-item-group>\n                <ion-item-divider>\n                  <ion-label>{{messages[idioma][\"valWasteText\"]}}</ion-label>\n                </ion-item-divider>\n                <ion-item v-for=\"r1 in rV\" :key=\"r1\">\n                  <ion-label text-wrap>{{ r1 }}</ion-label>\n                </ion-item>\n                <ion-item-divider>\n                  <ion-label>{{messages[idioma][\"spWasteText\"]}}</ion-label>\n                </ion-item-divider>\n                <ion-item v-for=\"r2 in rE\" :key=\"r2\">\n                  <ion-label text-wrap>{{ r2 }}</ion-label>\n                </ion-item>\n              </ion-item-group>\n            </ion-list>\n          </div>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle>{{messages[idioma][\"ownerText\"]}}</ion-card-subtitle>\n        </ion-card-header>\n        <ion-card-content>\n          <div class=\"c2\">\n            <ion-label v-for=\"t in tit\" :key=\"t\">{{ t }}</ion-label>\n          </div>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle>{{messages[idioma][\"expText\"]}}</ion-card-subtitle>\n        </ion-card-header>\n        <ion-card-content>\n          <div class=\"c2\">\n            <ion-label>{{ expl }}</ion-label>\n          </div>\n        </ion-card-content>\n      </ion-card>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script>\nimport {\n  IonContent,\n  IonHeader,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonButtons,\n  IonBackButton,\n  IonCard,\n  IonCardHeader,\n  IonCardTitle,\n  IonCardSubtitle,\n  IonCardContent,\n  IonSlides,\n  IonSlide,\n  IonList,\n  IonItem,\n  IonLabel,\n  IonIcon,\n  IonButton,\n  IonItemGroup,\n  IonItemDivider,\n} from \"@ionic/vue\";\nimport { defineComponent } from \"vue\";\nimport { NativeStorage } from \"@ionic-native/native-storage\";\n\nimport {\n  callOutline,\n  navigateCircleOutline,\n  globeOutline,\n} from \"ionicons/icons\";\nimport { CallNumber } from \"@ionic-native/call-number\";\nimport { InAppBrowser } from \"@ionic-native/in-app-browser\";\nimport { LaunchNavigator } from \"@ionic-native/launch-navigator\";\n\nimport axios from \"axios\";\n\nexport default defineComponent({\n  name: \"DetailsRecyclingPoint\",\n  props: [\"deixalleriaNum\"],\n  components: {\n    IonContent,\n    IonHeader,\n    IonPage,\n    IonTitle,\n    IonToolbar,\n    IonButtons,\n    IonBackButton,\n    IonCard,\n    IonCardHeader,\n    IonCardSubtitle,\n    IonCardTitle,\n    IonCardContent,\n    IonSlides,\n    IonSlide,\n    IonList,\n    IonItem,\n    IonLabel,\n    IonIcon,\n    IonButton,\n    IonItemGroup,\n    IonItemDivider,\n  },\n  data: function () {\n    return {\n      messages: {\n        es: require(\"../../public/assets/i18n/es.json\"),\n        ca: require(\"../../public/assets/i18n/ca.json\"),\n        en: require(\"../../public/assets/i18n/en.json\"),\n      },\n      idioma: \"es\",\n      points: require(\"../../public/assets/deixalleries.json\"),\n      myPoint: null,\n      sliderOptions: {\n        initialSlide: 0,\n        slidesPerView: 1,\n        autoplay: true,\n      },\n      telf: null,\n      isTelf: false,\n      addr: [],\n      isAddr: false,\n      url: null,\n      isUrl: false,\n      rV: [],\n      rE: [],\n      tit: [],\n      expl: null,\n      mail:\"\",\n    };\n  },\n  ionViewWillEnter: function(){\n    NativeStorage.getItem(\"login\").then((res) => {\n      this.mail = res[\"mail\"];\n    });\n  },\n  methods: {\n    callTo: function () {\n      CallNumber.callNumber(this.telf, true);\n\n      setTimeout(\n        (url) => {\n          if (url == this.getURL()) {\n            axios({\n              url:\n                \"http://192.168.1.41:3013/updateStats?mail=\" +\n                this.mail +\n                \"&type=call\",\n              method: \"get\",\n            });\n          }\n        },\n        10000,\n        this.getURL()\n      );\n    },\n    navigateTo: function () {\n      if (this.myPoint[\"coords\"][0] != null) {\n        LaunchNavigator.navigate(this.myPoint[\"coords\"]);\n\n        setTimeout(\n          (url) => {\n            if (url == this.getURL()) {\n              axios({\n                url:\n                  \"http://192.168.1.41:3013/updateStats?mail=\" +\n                  this.mail +\n                  \"&type=gps\",\n                method: \"get\",\n              });\n            }\n          },\n          10000,\n          this.getURL()\n        );\n      } else {\n        alert(this.messages[this.idioma][\"noCoordsText\"]);\n      }\n    },\n    openURL: function () {\n      InAppBrowser.create(this.url, \"_system\", \"location=yes\");\n      setTimeout(\n        (url) => {\n          if (url == this.getURL()) {\n            axios({\n              url:\n                \"http://192.168.1.41:3013/updateStats?mail=\" +\n                this.mail +\n                \"&type=web\",\n              method: \"get\",\n            });\n          }\n        },\n        10000,\n        this.getURL()\n      );\n    },\n  },\n  mounted: function () {\n    NativeStorage.getItem(\"idioma\").then((x) => (this.idioma = x));\n  },\n  created: function () {\n    if (this.deixalleriaNum != null) {\n      let found = false;\n      let i = 0;\n\n      let auxIdx = -1;\n\n      while (i < this.points.length && !found) {\n        if (this.points[i][\"id\"] == this.deixalleriaNum) {\n          this.myPoint = this.points[i];\n\n          //URL, DIR, TLF\n\n          for (let j = 0; j < this.points[i][\"info\"].length; j++) {\n            if (this.points[i][\"info\"][j] == \"Telèfon:\") {\n              if (auxIdx == -1) {\n                auxIdx = j;\n              }\n              this.telf = this.points[i][\"info\"][j + 1];\n              this.isTelf = true;\n            }\n\n            if (this.points[i][\"info\"][j][0] == \"Adreça web\") {\n              if (auxIdx == -1) {\n                auxIdx = j;\n              }\n              this.url = this.points[i][\"info\"][j][1];\n              this.isUrl = true;\n            }\n          }\n\n          for (let j = 0; j < auxIdx; j++) {\n            this.addr.push(this.points[i][\"info\"][j]);\n            this.isAddr = true;\n          }\n\n          if (this.telf == null) {\n            this.telf = this.messages[this.idioma][\"unavailableText\"];\n          }\n          if (this.addr.length == 0) {\n            this.addr.push(this.messages[this.idioma][\"unavailableText\"]);\n          }\n          if (this.url == null) {\n            this.url = this.messages[this.idioma][\"unavailableText\"];\n          }\n\n          //RV, RE\n\n          for (let k = 1; k < this.points[i][\"residusV\"].length; k++) {\n            const text = this.points[i][\"residusV\"][k].toLowerCase();\n\n            this.rV.push(text.charAt(0).toUpperCase() + text.slice(1));\n          }\n\n          for (let k = 1; k < this.points[i][\"residusE\"].length; k++) {\n            const text = this.points[i][\"residusE\"][k].toLowerCase();\n\n            this.rE.push(text.charAt(0).toUpperCase() + text.slice(1));\n          }\n\n          //TIT, EXPL\n\n          for (let l = 1; l < this.points[i][\"titular\"].length; l++) {\n            this.tit.push(this.points[i][\"titular\"][l]);\n          }\n\n          this.tit.unshift(this.points[i][\"titular\"][0].split(\": \")[1]);\n\n          this.expl = this.points[i][\"explotador\"][0].split(\": \")[1];\n\n          found = true;\n        } else {\n          i++;\n        }\n      }\n    }\n  },\n  setup: function () {\n    const getURL = function () {\n      return document.URL.split(\"#\")[0];\n    };\n\n    return {\n      callOutline,\n      navigateCircleOutline,\n      globeOutline,\n      getURL,\n    };\n  },\n});\n</script>\n\n<style>\n@import \"../styles/style.css\";\n</style>"]}]}