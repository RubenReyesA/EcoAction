{"remainingRequest":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsAwards.vue?vue&type=style&index=0&id=38b45b6f&scoped=true&lang=css","dependencies":[{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsAwards.vue","mtime":1623581070389},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1616796459000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4uL3N0eWxlcy9zdHlsZS5jc3MiOwpAaW1wb3J0ICIuLi9zdHlsZXMvZm9udFN0eWxlLmNzcyI7CkBpbXBvcnQgIi4uL3N0eWxlcy9jb2xvclN0eWxlLmNzcyI7Cg=="},{"version":3,"sources":["/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsAwards.vue"],"names":[],"mappings":";AA4ZA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC7B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACjC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Volumes/DATA SHARE/Trabajos 4t-UAB/TFG/Projecte/ecoAction/src/components/DetailsAwards.vue","sourceRoot":"","sourcesContent":["<template>\n  <ion-page>\n    <ion-header :translucent=\"true\">\n      <ion-toolbar>\n        <IonButtons>\n          <ion-back-button :text=\"messages[idioma]['backText']\" />\n        </IonButtons>\n        <ion-title>{{ messages[idioma][\"detailAwardsTitle\"] }} </ion-title>\n      </ion-toolbar>\n    </ion-header>\n\n    <ion-content :fullscreen=\"true\">\n      <ion-card>\n        <ion-card-header>\n          <ion-card-subtitle>{{\n            messages[idioma][\"balanceNow2\"]\n          }}</ion-card-subtitle>\n        </ion-card-header>\n        <ion-card-content>\n          <ion-grid>\n            <ion-row>\n              <ion-col>\n                <div class=\"container\">\n                  <p id=\"priceValue2\">\n                    {{ tokenBalance }} EA2C ----> {{ fiatBalance }}\n                    {{ currency }}\n                  </p>\n                </div>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </ion-card-content>\n      </ion-card>\n\n      <ion-grid>\n        <ion-row>\n          <ion-col>\n            <div class=\"container\">\n              <ion-card v-if=\"idAward == 1\" class=\"default cardR1\"> </ion-card>\n              <ion-card v-if=\"idAward == 2\" class=\"default cardR2\"> </ion-card>\n              <ion-card v-if=\"idAward == 3\" class=\"default cardR3\"> </ion-card>\n              <ion-card v-if=\"idAward == 4\" class=\"default cardR4\"> </ion-card>\n              <ion-card v-if=\"idAward == 5\" class=\"default cardR5\"> </ion-card>\n              <ion-card v-if=\"idAward == 6\" class=\"default cardR6\"> </ion-card>\n              <ion-card v-if=\"idAward == 7\" class=\"default cardR7\"> </ion-card>\n              <ion-card v-if=\"idAward == 8\" class=\"default cardR8\"> </ion-card>\n              <ion-card v-if=\"idAward == 9\" class=\"default cardR9\"> </ion-card>\n              <ion-card v-if=\"idAward == 10\" class=\"default cardR10\">\n              </ion-card>\n              <ion-card v-if=\"idAward == 11\" class=\"default cardR11\">\n              </ion-card>\n              <ion-card v-if=\"idAward == 12\" class=\"default cardR12\">\n              </ion-card>\n            </div>\n          </ion-col>\n        </ion-row>\n      </ion-grid>\n\n      <ion-list>\n        <ion-radio-group v-model=\"quantitySelected\">\n          <ion-list-header>\n            <ion-label>{{ messages[idioma][\"quantitySelect\"] }}</ion-label>\n          </ion-list-header>\n\n          <ion-item :disabled=\"possible['5']\">\n            <ion-label>5€</ion-label>\n            <ion-radio slot=\"start\" value=\"5\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"5\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n\n          <ion-item :disabled=\"possible['10']\">\n            <ion-label>10€</ion-label>\n            <ion-radio slot=\"start\" value=\"10\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"10\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n\n          <ion-item :disabled=\"possible['20']\">\n            <ion-label>20€</ion-label>\n            <ion-radio slot=\"start\" value=\"20\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"20\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n\n          <ion-item :disabled=\"possible['50']\">\n            <ion-label>50€</ion-label>\n            <ion-radio slot=\"start\" value=\"50\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"50\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n\n          <ion-item :disabled=\"possible['100']\">\n            <ion-label>100€</ion-label>\n            <ion-radio slot=\"start\" value=\"100\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"100\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n\n          <ion-item :disabled=\"possible['200']\">\n            <ion-label>200€</ion-label>\n            <ion-radio slot=\"start\" value=\"200\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"200\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n\n          <ion-item :disabled=\"possible['500']\">\n            <ion-label>500€</ion-label>\n            <ion-radio slot=\"start\" value=\"500\"></ion-radio>\n            <ion-badge color=\"black\" slot=\"end\" class=\"useCircular\"\n              >({{ quantities[\"500\"] }} EAs)</ion-badge\n            >\n          </ion-item>\n        </ion-radio-group>\n      </ion-list>\n\n      <ion-card>\n        <ion-card-content>\n          <ion-grid>\n            <ion-row>\n              <ion-col class=\"midCol\">\n                <p>\n                  {{ messages[idioma][\"comissionFeeText\"] }} {{ comission }}\n                  {{ currency.toUpperCase() }}\n                </p>\n              </ion-col>\n            </ion-row>\n            <ion-row>\n              <ion-col class=\"midCol\">\n                <p>\n                  {{ messages[idioma][\"totalPayText\"] }} {{ total }}\n                  {{ currency.toUpperCase() }}\n                </p>\n              </ion-col>\n            </ion-row>\n          </ion-grid>\n        </ion-card-content>\n      </ion-card>\n\n      <div class=\"container\">\n        <ion-card class=\"btnCard3 ion-activatable\" @click=\"buy\" color=\"black\">\n          <ion-card-content>\n            <ion-ripple-effect></ion-ripple-effect>\n            <h1 class=\"btnLabels2 useLondrina\">\n              {{ messages[idioma][\"exchangeText\"] }}\n            </h1>\n          </ion-card-content>\n        </ion-card>\n      </div>\n    </ion-content>\n  </ion-page>\n</template>\n\n<script>\nimport {\n  IonContent,\n  IonHeader,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonButtons,\n  IonBackButton,\n  IonCardHeader,\n  IonCardContent,\n  IonCardSubtitle,\n  IonCard,\n  IonGrid,\n  IonRow,\n  IonCol,\n  loadingController,\n  IonList,\n  IonLabel,\n  IonItem,\n  IonRadio,\n  IonRadioGroup,\n  IonListHeader,\n  IonRippleEffect,\n  IonBadge,\n} from \"@ionic/vue\";\nimport { defineComponent } from \"vue\";\nimport { NativeStorage } from \"@ionic-native/native-storage\";\n\nimport { useRouter } from \"vue-router\";\n\nimport axios from \"axios\";\n\nexport default defineComponent({\n  name: \"DetailsAwards\",\n  components: {\n    IonContent,\n    IonHeader,\n    IonPage,\n    IonTitle,\n    IonToolbar,\n    IonButtons,\n    IonBackButton,\n    IonCardHeader,\n    IonCardContent,\n    IonCardSubtitle,\n    IonCard,\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonList,\n    IonLabel,\n    IonItem,\n    IonRadio,\n    IonRadioGroup,\n    IonListHeader,\n    IonRippleEffect,\n    IonBadge,\n  },\n  props: [\"idAward\"],\n  data: function () {\n    return {\n      messages: {\n        es: require(\"../../public/assets/i18n/es.json\"),\n        ca: require(\"../../public/assets/i18n/ca.json\"),\n        en: require(\"../../public/assets/i18n/en.json\"),\n      },\n      idioma: \"es\",\n      fiatBalance: 0,\n      tokenBalance: 0,\n      controlBalances: null,\n      controlSend: null,\n      currency: \"eur\",\n      tokenAddress: \"\",\n      quantities: {},\n      quantitySelected: \"0\",\n      possible: {},\n      name: \"\",\n      mail: \"\",\n      comission: \"0\",\n      total: \"0\",\n    };\n  },\n  watch: {\n    quantitySelected: function () {\n      axios({\n        url:\n          \"http://192.168.1.41:3013/getGasEstimation?method=send&addr=\" +\n          this.tokenAddress +\n          \"&q=\" +\n          this.quantities[this.quantitySelected].toString() +\n          \"&currency=\" +\n          this.currency,\n        method: \"get\",\n      })\n        .then((response2) => {\n          this.comission =\n            response2.data[0] + \" EAs - \" + response2.data[1] + \" \";\n\n          const totalT =\n            parseInt(this.quantities[this.quantitySelected].toString()) +\n            parseInt(response2.data[0]);\n          const totalF =\n            parseFloat(this.quantitySelected.toString()) +\n            parseFloat(response2.data[1]);\n\n          this.total = totalT + \" EAs - \" + totalF + \" \";\n        })\n        .catch((err) => {\n          console.log(\"Error: \" + err.toString());\n        });\n    },\n  },\n  methods: {\n    getBalances: function () {\n      loadingController\n        .create({\n          message: this.messages[this.idioma][\"loadingData\"],\n        })\n        .then((loading) => {\n          this.controlBalances = loading;\n          loading.present();\n          axios({\n            url:\n              \"http://192.168.1.41:3013/getBalance?tokenAddress=\" +\n              this.tokenAddress +\n              \"&currency=\" +\n              this.currency,\n            method: \"get\",\n          })\n            .then((response) => {\n              axios({\n                url: \"http://192.168.1.41:3013/getQuantities\",\n                method: \"get\",\n              }).then((response2) => {\n                this.quantities = {};\n\n                this.quantities[\"5\"] = response2.data[0];\n                this.quantities[\"10\"] = response2.data[1];\n                this.quantities[\"20\"] = response2.data[2];\n                this.quantities[\"50\"] = response2.data[3];\n                this.quantities[\"100\"] = response2.data[4];\n                this.quantities[\"200\"] = response2.data[5];\n                this.quantities[\"500\"] = response2.data[6];\n\n                this.tokenBalance = 2000;\n\n                this.tokenBalance = response.data[0] + \"\";\n                this.fiatBalance = response.data[1] + \"\";\n\n                this.possible[\"5\"] =\n                  parseInt(this.quantities[\"5\"]) > parseInt(this.tokenBalance);\n                this.possible[\"10\"] =\n                  parseInt(this.quantities[\"10\"]) > parseInt(this.tokenBalance);\n                this.possible[\"20\"] =\n                  parseInt(this.quantities[\"20\"]) > parseInt(this.tokenBalance);\n                this.possible[\"50\"] =\n                  parseInt(this.quantities[\"50\"]) > parseInt(this.tokenBalance);\n                this.possible[\"100\"] =\n                  parseInt(this.quantities[\"100\"]) >\n                  parseInt(this.tokenBalance);\n                this.possible[\"200\"] =\n                  parseInt(this.quantities[\"200\"]) >\n                  parseInt(this.tokenBalance);\n                this.possible[\"500\"] =\n                  parseInt(this.quantities[\"500\"]) >\n                  parseInt(this.tokenBalance);\n\n                this.controlBalances.dismiss();\n              });\n            })\n            .catch((err) => {\n              this.controlBalances.dismiss();\n\n              alert(\"Error => \" + err);\n              this.goBack;\n            });\n        })\n        .catch((err) => {\n          this.controlBalances.dismiss();\n\n          alert(\"Error => \" + err);\n          this.goBack;\n        });\n    },\n    buy: function () {\n      if (this.quantitySelected != \"\") {\n        loadingController\n          .create({\n            message: this.messages[this.idioma][\"exchangeSuccess\"],\n          })\n          .then((loading) => {\n            this.controlSend = loading;\n            loading.present();\n\n            axios({\n              url:\n                \"http://192.168.1.41:3013/redeemCode?id=\" +\n                this.idAward +\n                \"&name=\" +\n                this.name +\n                \"&mail=\" +\n                this.mail +\n                \"&q=\" +\n                this.quantitySelected +\n                \"&language=\" +\n                this.idioma.toUpperCase() +\n                \"&price=\" +\n                this.quantities[this.quantitySelected.toString()],\n              method: \"get\",\n            }).then((response) => {\n              alert(this.messages[this.idioma][response.data]);\n              this.controlSend.dismiss();\n              this.goBack();\n            });\n          })\n          .catch((err) => {\n            console.log(\"Error: \" + err);\n            this.controlSend.dismiss();\n            this.goBack();\n          });\n      } else {\n        alert(\"Error\");\n      }\n    },\n  },\n  ionViewWillEnter: function () {\n    NativeStorage.getItem(\"login\").then((res) => {\n      this.tokenAddress = res[\"tokenAddress\"];\n      this.name = res[\"name\"];\n      this.mail = res[\"mail\"];\n    });\n\n    NativeStorage.getItem(\"idioma\").then((x) => {\n      this.idioma = x;\n      this.getBalances();\n    });\n  },\n  setup: function () {\n    const router = useRouter();\n\n    const goBack = () => {\n      router.go(-1);\n    };\n\n    return {\n      goBack,\n    };\n  },\n});\n</script>\n\n<style scoped>\n@import \"../styles/style.css\";\n@import \"../styles/fontStyle.css\";\n@import \"../styles/colorStyle.css\";\n</style>"]}]}