{"remainingRequest":"/Users/ruben107/Documents/Alfa/myApp/node_modules/thread-loader/dist/cjs.js!/Users/ruben107/Documents/Alfa/myApp/node_modules/babel-loader/lib/index.js!/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/ruben107/Documents/Alfa/myApp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/ruben107/Documents/Alfa/myApp/src/components/LoginRegisterSession.vue?vue&type=template&id=21ebe019","dependencies":[{"path":"/Users/ruben107/Documents/Alfa/myApp/src/components/LoginRegisterSession.vue","mtime":1610127638912},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiY29udGFpbmVyIgp9OwoKdmFyIF9ob2lzdGVkXzIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiTG9naW4gZXhpc3RpbmcgYWNjb3VudCIpOwoKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJjb250YWluZXIiCn07Cgp2YXIgX2hvaXN0ZWRfNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCJSZWdpc3RlciIpOwoKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9pb25fYnV0dG9uID0gX3Jlc29sdmVDb21wb25lbnQoImlvbi1idXR0b24iKTsKCiAgdmFyIF9jb21wb25lbnRfaW9uX2NvbCA9IF9yZXNvbHZlQ29tcG9uZW50KCJpb24tY29sIik7CgogIHZhciBfY29tcG9uZW50X2lvbl9yb3cgPSBfcmVzb2x2ZUNvbXBvbmVudCgiaW9uLXJvdyIpOwoKICB2YXIgX2NvbXBvbmVudF9pb25fZ3JpZCA9IF9yZXNvbHZlQ29tcG9uZW50KCJpb24tZ3JpZCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9pb25fZ3JpZCwgewogICAgaWQ6ICJoZWxsb0NvbnRhaW5lciIKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfaW9uX3JvdywgbnVsbCwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfaW9uX2NvbCwgewogICAgICAgICAgICBjbGFzczogImlvbi1wYWRkaW5nIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pb25fYnV0dG9uLCB7CiAgICAgICAgICAgICAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9IGZ1bmN0aW9uICgkZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jdHguZ290b0xvZ2luKF9jdHguY29udHJvbCk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF8yXTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICAgIH0pXSldOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSksIF9jcmVhdGVWTm9kZShfY29tcG9uZW50X2lvbl9yb3csIG51bGwsIHsKICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2lvbl9jb2wsIHsKICAgICAgICAgICAgY2xhc3M6ICJpb24tcGFkZGluZyIKICAgICAgICAgIH0sIHsKICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKCJkaXYiLCBfaG9pc3RlZF8zLCBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfaW9uX2J1dHRvbiwgewogICAgICAgICAgICAgICAgb25DbGljazogX2N0eC5nb3RvUmVnaXN0ZXIKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBbX2hvaXN0ZWRfNF07CiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIF86IDEKICAgICAgICAgICAgICB9LCA4LCBbIm9uQ2xpY2siXSldKV07CiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBfOiAxCiAgICAgICAgICB9KV07CiAgICAgICAgfSksCiAgICAgICAgXzogMQogICAgICB9KV07CiAgICB9KSwKICAgIF86IDEKICB9KTsKfQ=="},{"version":3,"sources":["/Users/ruben107/Documents/Alfa/myApp/src/components/LoginRegisterSession.vue"],"names":[],"mappings":";;AAIa,EAAA,KAAK,EAAC;;;+CAC+B,wB;;;AAOrC,EAAA,KAAK,EAAC;;;+CACyB,U;;;;;;;;;;;uBAZ1C,YAAA,CAgBW,mBAhBX,EAgBW;AAhBD,IAAA,EAAE,EAAC;AAgBF,GAhBX,EAA6B;sBAC3B;AAAA,aAMU,CANV,YAAA,CAMU,kBANV,EAMU,IANV,EAMU;0BALR;AAAA,iBAIU,CAJV,YAAA,CAIU,kBAJV,EAIU;AAJD,YAAA,KAAK,EAAC;AAIL,WAJV,EAA4B;8BAC1B;AAAA,qBAEM,CAFN,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADJ,YAAA,CAA2E,qBAA3E,EAA2E;AAA9D,gBAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,yBAAE,IAAA,CAAA,SAAA,CAAU,IAAA,CAAA,OAAV,CAAF;AAAA,iBAAA;AAAyD,eAA3E,E;kCAAwC;AAAA,yBAAsB,C,UAAA,CAAtB;AAAA,iB;;eAAxC,CACI,CAFN,CAEM,CAFN;AAAA,a,CAD0B;;AAAA,WAA5B,CAIU,CAJV;AAAA,S,CAKQ;;AAAA,OANV,CAMU,EAEV,YAAA,CAMU,kBANV,EAMU,IANV,EAMU;0BALR;AAAA,iBAIU,CAJV,YAAA,CAIU,kBAJV,EAIU;AAJD,YAAA,KAAK,EAAC;AAIL,WAJV,EAA4B;8BAC1B;AAAA,qBAEM,CAFN,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADJ,YAAA,CAAuD,qBAAvD,EAAuD;AAA1C,gBAAA,OAAK,EAAE,IAAA,CAAA;AAAmC,eAAvD,EAAgC;kCAAE;AAAA,yBAAQ,C,UAAA,CAAR;AAAA,iB,CAAF;;AAAA,eAAhC,E,CAAA,E,WAAA,CACI,CAFN,CAEM,CAFN;AAAA,a,CAD0B;;AAAA,WAA5B,CAIU,CAJV;AAAA,S,CAKQ;;AAAA,OANV,CAFU,CANV;AAAA,K,CAD2B;;AAAA,GAA7B,C","sourcesContent":["<template>\n  <ion-grid id=\"helloContainer\">\n    <ion-row>\n      <ion-col class=\"ion-padding\">\n        <div class=\"container\">\n          <ion-button @click=\"gotoLogin(control)\">Login existing account</ion-button>\n        </div>\n      </ion-col>\n    </ion-row>\n\n    <ion-row>\n      <ion-col class=\"ion-padding\">\n        <div class=\"container\">\n          <ion-button @click=\"gotoRegister\">Register</ion-button>\n        </div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</template>\n\n<script>\nimport {\n  IonGrid,\n  IonRow,\n  IonCol,\n  IonButton,\n  loadingController,\n} from \"@ionic/vue\";\nimport { useRouter } from \"vue-router\";\n\nimport { defineComponent } from \"vue\";\nimport { NativeStorage } from \"@ionic-native/native-storage\";\nimport { KeychainTouchId } from \"@ionic-native/keychain-touch-id\";\nimport axios from \"axios\";\nimport sha256 from \"js-sha256\";\n\nexport default defineComponent({\n  name: \"LoginRegisterSession\",\n  props: {},\n  components: {\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonButton,\n  },\n  data: function () {\n    return {\n      control: null,\n    };\n  },\n  setup() {\n    const router = useRouter();\n\n    const gotoLogin = (c) => {\n      NativeStorage.getItem(\"loginPRO\")\n        .then((res) => {\n          KeychainTouchId.isAvailable()\n            .then(() => {\n              KeychainTouchId.verify(\"loginCredentials\", \"Use to login\")\n                .then((res2) => {\n                  loadingController\n                    .create({\n                      message: \"Iniciando sesión...\",\n                    })\n                    .then((loading) => {\n                      c = loading;\n                      loading.present();\n                      axios({\n                        url: \"http://192.168.1.41:3013/loginUser\",\n                        method: \"post\",\n                        headers: { Accept: \"application/json\" },\n                        data: {\n                          mail: res,\n                        },\n                      })\n                        .then((response) => {\n                          if (response.status == 200) {\n                            c.dismiss();\n                            if (sha256(res2 == response.data)) {\n                              alert(\"Sesión iniciada correctamente\");\n                              NativeStorage.setItem(\"login\", \"TEST_NAME\");\n                            } else {\n                              alert(\"Contraseña incorrecta!\");\n                            }\n                          } else {\n                            c.dismiss();\n                            alert(\n                              \"This mail is not registered in the system. Please register or use another mail\"\n                            );\n                          }\n                        })\n                        .catch((err) => {\n                          c.dismiss();\n                          alert(\"Se ha producido un error: \" + err);\n                        });\n                    });\n                })\n                .catch((err2) => {\n                  alert(\"Error keychain: \" + err2);\n                });\n            })\n            .catch((err) => alert(\"Error: \" + err));\n        })\n        .catch(() => {\n          router.push(\"/main/home/login\");\n        });\n    };\n\n    const gotoRegister = () => {\n      router.push(\"/main/home/register\");\n    };\n\n    return {\n      gotoLogin,\n      gotoRegister,\n    };\n  },\n});\n</script>\n\n<style>\n@import \"../styles/homeStyle.css\";\n</style>"],"sourceRoot":""}]}