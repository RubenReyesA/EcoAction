{"remainingRequest":"/Users/ruben107/Documents/Alfa/myApp/node_modules/thread-loader/dist/cjs.js!/Users/ruben107/Documents/Alfa/myApp/node_modules/babel-loader/lib/index.js!/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/templateLoader.js??ref--6!/Users/ruben107/Documents/Alfa/myApp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/ruben107/Documents/Alfa/myApp/src/components/LoginRegisterSession.vue?vue&type=template&id=2c6a2ef4","dependencies":[{"path":"/Users/ruben107/Documents/Alfa/myApp/src/components/LoginRegisterSession.vue","mtime":1610112067674},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ruben107/Documents/Alfa/myApp/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVGV4dFZOb2RlIGFzIF9jcmVhdGVUZXh0Vk5vZGUsIHJlc29sdmVDb21wb25lbnQgYXMgX3Jlc29sdmVDb21wb25lbnQsIHdpdGhDdHggYXMgX3dpdGhDdHgsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiY29udGFpbmVyIgp9OwoKdmFyIF9ob2lzdGVkXzIgPSAvKiNfX1BVUkVfXyovX2NyZWF0ZVRleHRWTm9kZSgiTG9naW4gZXhpc3RpbmcgYWNjb3VudCIpOwoKdmFyIF9ob2lzdGVkXzMgPSB7CiAgY2xhc3M6ICJjb250YWluZXIiCn07Cgp2YXIgX2hvaXN0ZWRfNCA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVGV4dFZOb2RlKCJSZWdpc3RlciIpOwoKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUsICRwcm9wcywgJHNldHVwLCAkZGF0YSwgJG9wdGlvbnMpIHsKICB2YXIgX2NvbXBvbmVudF9pb25fYnV0dG9uID0gX3Jlc29sdmVDb21wb25lbnQoImlvbi1idXR0b24iKTsKCiAgdmFyIF9jb21wb25lbnRfaW9uX2NvbCA9IF9yZXNvbHZlQ29tcG9uZW50KCJpb24tY29sIik7CgogIHZhciBfY29tcG9uZW50X2lvbl9yb3cgPSBfcmVzb2x2ZUNvbXBvbmVudCgiaW9uLXJvdyIpOwoKICB2YXIgX2NvbXBvbmVudF9pb25fZ3JpZCA9IF9yZXNvbHZlQ29tcG9uZW50KCJpb24tZ3JpZCIpOwoKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soX2NvbXBvbmVudF9pb25fZ3JpZCwgewogICAgaWQ6ICJoZWxsb0NvbnRhaW5lciIKICB9LCB7CiAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfaW9uX3JvdywgbnVsbCwgewogICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBbX2NyZWF0ZVZOb2RlKF9jb21wb25lbnRfaW9uX2NvbCwgewogICAgICAgICAgICBjbGFzczogImlvbi1wYWRkaW5nIgogICAgICAgICAgfSwgewogICAgICAgICAgICBkZWZhdWx0OiBfd2l0aEN0eChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pb25fYnV0dG9uLCB7CiAgICAgICAgICAgICAgICBvbkNsaWNrOiBfY3R4LmdvdG9Mb2dpbgogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIFtfaG9pc3RlZF8yXTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgXzogMQogICAgICAgICAgICAgIH0sIDgsIFsib25DbGljayJdKV0pXTsKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIF86IDEKICAgICAgICAgIH0pXTsKICAgICAgICB9KSwKICAgICAgICBfOiAxCiAgICAgIH0pLCBfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pb25fcm93LCBudWxsLCB7CiAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIFtfY3JlYXRlVk5vZGUoX2NvbXBvbmVudF9pb25fY29sLCB7CiAgICAgICAgICAgIGNsYXNzOiAiaW9uLXBhZGRpbmciCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGRlZmF1bHQ6IF93aXRoQ3R4KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICByZXR1cm4gW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMywgW19jcmVhdGVWTm9kZShfY29tcG9uZW50X2lvbl9idXR0b24sIHsKICAgICAgICAgICAgICAgIG9uQ2xpY2s6IF9jdHguZ290b1JlZ2lzdGVyCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgZGVmYXVsdDogX3dpdGhDdHgoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gW19ob2lzdGVkXzRdOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBfOiAxCiAgICAgICAgICAgICAgfSwgOCwgWyJvbkNsaWNrIl0pXSldOwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgXzogMQogICAgICAgICAgfSldOwogICAgICAgIH0pLAogICAgICAgIF86IDEKICAgICAgfSldOwogICAgfSksCiAgICBfOiAxCiAgfSk7Cn0="},{"version":3,"sources":["/Users/ruben107/Documents/Alfa/myApp/src/components/LoginRegisterSession.vue"],"names":[],"mappings":";;AAIa,EAAA,KAAK,EAAC;;;+CACsB,wB;;;AAO5B,EAAA,KAAK,EAAC;;;+CACyB,U;;;;;;;;;;;uBAZ1C,YAAA,CAgBW,mBAhBX,EAgBW;AAhBD,IAAA,EAAE,EAAC;AAgBF,GAhBX,EAA6B;sBAC3B;AAAA,aAMU,CANV,YAAA,CAMU,kBANV,EAMU,IANV,EAMU;0BALR;AAAA,iBAIU,CAJV,YAAA,CAIU,kBAJV,EAIU;AAJD,YAAA,KAAK,EAAC;AAIL,WAJV,EAA4B;8BAC1B;AAAA,qBAEM,CAFN,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADJ,YAAA,CAAkE,qBAAlE,EAAkE;AAArD,gBAAA,OAAK,EAAE,IAAA,CAAA;AAA8C,eAAlE,EAA6B;kCAAE;AAAA,yBAAsB,C,UAAA,CAAtB;AAAA,iB,CAAF;;AAAA,eAA7B,E,CAAA,E,WAAA,CACI,CAFN,CAEM,CAFN;AAAA,a,CAD0B;;AAAA,WAA5B,CAIU,CAJV;AAAA,S,CAKQ;;AAAA,OANV,CAMU,EAEV,YAAA,CAMU,kBANV,EAMU,IANV,EAMU;0BALR;AAAA,iBAIU,CAJV,YAAA,CAIU,kBAJV,EAIU;AAJD,YAAA,KAAK,EAAC;AAIL,WAJV,EAA4B;8BAC1B;AAAA,qBAEM,CAFN,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,CADJ,YAAA,CAAuD,qBAAvD,EAAuD;AAA1C,gBAAA,OAAK,EAAE,IAAA,CAAA;AAAmC,eAAvD,EAAgC;kCAAE;AAAA,yBAAQ,C,UAAA,CAAR;AAAA,iB,CAAF;;AAAA,eAAhC,E,CAAA,E,WAAA,CACI,CAFN,CAEM,CAFN;AAAA,a,CAD0B;;AAAA,WAA5B,CAIU,CAJV;AAAA,S,CAKQ;;AAAA,OANV,CAFU,CANV;AAAA,K,CAD2B;;AAAA,GAA7B,C","sourcesContent":["<template>\n  <ion-grid id=\"helloContainer\">\n    <ion-row>\n      <ion-col class=\"ion-padding\">\n        <div class=\"container\">\n          <ion-button @click=\"gotoLogin\">Login existing account</ion-button>\n        </div>\n      </ion-col>\n    </ion-row>\n\n    <ion-row>\n      <ion-col class=\"ion-padding\">\n        <div class=\"container\">\n          <ion-button @click=\"gotoRegister\">Register</ion-button>\n        </div>\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n</template>\n\n<script>\nimport { IonGrid, IonRow, IonCol, IonButton } from \"@ionic/vue\";\nimport { useRouter } from \"vue-router\";\n\nimport { defineComponent } from \"vue\";\nimport { NativeStorage } from \"@ionic-native/native-storage\";\nimport { KeychainTouchId } from \"@ionic-native/keychain-touch-id\";\n\nexport default defineComponent({\n  name: \"LoginRegisterSession\",\n  props: {},\n  components: {\n    IonGrid,\n    IonRow,\n    IonCol,\n    IonButton,\n  },\n  setup() {\n    const router = useRouter();\n\n    const gotoLogin = () => {\n      NativeStorage.getItem(\"loginPRO\").then((res) => {\n        if (res) {\n          KeychainTouchId.isAvailable()\n            .then(() => {\n              KeychainTouchId.verify(\"loginCredentials\", \"Use to login\")\n                .then((res2) => {\n                  loadingController\n                    .create({\n                      message: \"Iniciando sesión...\",\n                    })\n                    .then((loading) => {\n                      this.control = loading;\n                      loading.present();\n                      axios({\n                        url: \"http://192.168.1.41:3013/loginUser\",\n                        method: \"post\",\n                        headers: { Accept: \"application/json\" },\n                        data: {\n                          mail: res2[0],\n                        },\n                      })\n                        .then((response) => {\n                          if (response.status == 200) {\n                            this.control.dismiss();\n                            if (sha256(res2[1]) == response.data) {\n                              alert(\"Sesión iniciada correctamente\");\n                              NativeStorage.setItem(\"login\", \"TEST_NAME\");\n                            } else {\n                              alert(\"Contraseña incorrecta!\");\n                            }\n                          } else {\n                            this.control.dismiss();\n                            alert(\n                              \"This mail is not registered in the system. Please register or use another mail\"\n                            );\n                          }\n                        })\n                        .catch((err) => {\n                          this.control.dismiss();\n                          alert(\"Se ha producido un error: \" + err);\n                        });\n                    });\n                })\n                .catch((err2) => {\n                  alert(\"Error: \" + err2);\n                });\n            })\n            .catch((err) => alert(\"Error: \" + err));\n        } else {\n          router.push(\"/main/home/login\");\n        }\n      });\n    };\n\n    const gotoRegister = () => {\n      router.push(\"/main/home/register\");\n    };\n\n    return {\n      gotoLogin,\n      gotoRegister,\n    };\n  },\n});\n</script>\n\n<style>\n@import \"../styles/homeStyle.css\";\n</style>"],"sourceRoot":""}]}